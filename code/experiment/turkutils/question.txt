<html>

  <head>

    <style>
    #main
    {
     margin: 100px auto;
     width: 900px;
     text-align:center;
    }
    </style>

    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <script src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js' type='text/javascript'></script>

    <script>

     function turkGetParam( name, defaultValue )
     {
       var regexS = "[\?&]"+name+"=([^&#]*)";
       var regex = new RegExp( regexS );
       var tmpURL = window.location.href;
       var results = regex.exec( tmpURL );

       if( results == null )
         { return defaultValue }
       else
         { return results[1]}
      }

      var worker_id_from_webpage = turkGetParam( 'workerId', 'NONE' )

      var user_input = '%s'

      function myFunction() {

        password_match = document.getElementById('text_box_input').value === user_input

        if ( password_match )
        {
          document.getElementById("correct_message").style.color = "blue";
          document.getElementById("submit_password").style.display = "none";
          document.getElementById("correct_message").style.display = "block"
          document.getElementById("submitButton").style.display = "inline-block"
        }
        else
        {
          document.getElementById("error_message").style.color = "red";
          document.getElementById("error_message").style.display = "block";}
        }

    </script>

  </head>

  <body>

    <!-- HTML to handle creating the HIT form -->

    <div id='main'>

      <p id="error_message" style='display:none; font-size:20px'>
      You must acccept this HIT for the identity validation step to be successful <br/>
      If you continue getting this message and believe it is an error, send the experimenter an email<br/><br/>
      Otherwise, please return this HIT! <br/>
      The person who this was indended for wont get paid until you do :(
      </p>
      <p id="correct_message" style='display:none; font-size:20px'>
      Thanks so much!<br/>
      We appreciate your time and apologize for the hassle :)<br/>
      Press "Submit" to receive your compensation. It may take up to 24 hours to complete. 
      </p>

      <form name='mturk_form' method='post' id='mturk_form' action='%s'>

        <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
        <!-- set question for subject -->
        <h2>Please enter your password</h2>
        <p><textarea id='text_box_input' name='answer' rows=1 cols=%d></textarea></p>
        <!-- HTML to handle submitting the HIT -->
        <p><input type='submit' id='submitButton' value='Submit' style='display:none'/></p></form>
        <p><input type='submit' id='submit_password' value='PASSWORD SUBMIT' onclick="myFunction()"/></p>

    </div>
    <script language='Javascript'>turkSetAssignmentID();</script>
  </body>

</html>
